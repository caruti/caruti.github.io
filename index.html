<!--
Carta de dedicada para mÃ­ amol ..........


Caru ti ..........
-->
<!DOCTYPE html>
<html>
    <head>
        <link type="image/x-icon" href="favicon.ico" rel="icon" />
        <title>Caru ti Hermosa</title>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <meta name="viewport" content="width=device-width; initial-scale=1.0; maximum-scale=1.0; user-scalable=0;" />
        <link rel="stylesheet" href="css/normalize.min.css">   
        <script type="text/javascript" src="js/Cascada.js"></script>
        <script type="text/javascript" src="js/puntero.js"></script>
        
        <link rel="stylesheet" type="text/css" href="css/Css.css" media="screen">
        <script class="cssdeck" src="//cdnjs.cloudflare.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
        <link href='http://fonts.googleapis.com/css?family=Bad+Script|Titillium+Web' rel='stylesheet' type='text/css'>
        <script>
            $(function(){
   var $contenedor = $('#contenedor'),
		  $abrir = $('#abrir'),
		  $carta = $('#carta'),
      $cara = $('.cara').find('h1'),
      $icon = $('.icon-cancel'),
      $pers = $('#perspectiva');

  	setTimeout(function(){
			abrir();
		}, 1500);

		$cara.on('click', function(){
			abrir();
			return false;
		});

		$icon.on('click', function(){
			cerrar();
			return false;
		});

		function abrir(){
			$contenedor.removeClass('rotar_').addClass('rotar');
			$abrir.removeClass('tapa_').addClass('tapa');
			$carta.removeClass('bajarTop_').addClass('bajarTop');
			$pers.removeClass('subirTop_').addClass('subirTop');
		}

		function cerrar(){
			$contenedor.removeClass('rotar').addClass('rotar_');
			$abrir.removeClass('tapa').addClass('tapa_');
			$carta.removeClass('bajarTop').addClass('bajarTop_');
			$pers.removeClass('subirTop').addClass('subirTop_');
		}

});
// <![CDATA[
var speed=40; 
var flakes=33; 
var untidy=8; 
var sizes=36; 
var colour='#f7f7f7'; 

/****************************\

\****************************/

var boddie;
var dx=new Array();
var xp=new Array();
var yp=new Array();
var am=new Array();
var dy=new Array();
var le=new Array();
var fs=new Array();
var flaky=new Array();
var swide=480;
var shigh=320;
var sleft=0;
var starty=0;
var offset=0;
var tidying=0;
var deeex=0;
var has_focus=true;
var snowflakes=new Array(8727, 10016, 10033, 10035, 10036, 10037, 10038, 10042, 10043, 10044, 10045, 10046, 10051, 10052, 10053, 10054, 10055, 10056, 10057, 10058, 10059);
var ie_version=(navigator.appVersion.indexOf("MSIE")!=-1)?parseFloat(navigator.appVersion.split("MSIE")[1]):false;
var plow=document.createElement("div");
plow.src='';

function addLoadEvent(funky) {
  var oldonload=window.onload;
  if (typeof(oldonload)!='function') window.onload=funky;
  else window.onload=function() {
    if (oldonload) oldonload();
    funky();
  }
}

addLoadEvent(december_21);

function december_21() { if (document.getElementById) {
  var i;
  if (ie_version) {
    document.onfocusin=function(){has_focus=true;};
    document.onfocusout=function(){has_focus=false;sleft=0;};
  } 
  else {
    window.onfocus=function(){has_focus=true;};
    window.onblur=function(){has_focus=false;sleft=0;};
  }
  window.onscroll=set_scroll;
  window.onresize=set_width;
  document.onmousemove=mouse;
  boddie=document.createElement("div");
  boddie.style.position="fixed";
  boddie.style.bottom="0px";
  boddie.style.left="0px";
  boddie.style.width="100%";
  boddie.style.overflow="hidden";
  boddie.style.backgroundColor="transparent";
  boddie.style.pointerEvents="none";
  boddie.style.zIndex="0";
  document.body.insertBefore(boddie, document.body.firstChild); 
  set_width();
  plow.style.position="absolute";
  plow.style.overflow="hidden";
  plow.style.zIndex=9999;
  plow.style.bottom="0px";
  plow.style.left="-144px";
  boddie.appendChild(plow);
  for (i=0; i<flakes; i++) freeze_ice(Math.random()*shigh*3/4);
  offset=0;
  setInterval("winter_flakes()", speed);
}}

function freeze_ice(whyp) {
  starty++;
  offset++;
  var f, t;
  start_fall(starty, whyp);
  f=document.createElement("div");
  t=document.createTextNode(String.fromCharCode(snowflakes[starty%snowflakes.length]));
  f.appendChild(t);
  t=f.style;
  t.color=colour;
  if (ie_version && ie_version<10) t.filter="glow(color="+colour+",strength=1)";
  else if (ie_version) t.boxShadow="0px 0px 2x 2px "+colour;
  else t.textShadow=colour+' 0px 0px 2px';
  t.font=fs[starty]+"px sans-serif";
  t.position="absolute";
  t.zIndex=1000+starty;
  t.top=yp[starty]+"px";
  t.left=xp[starty]+"px";
  t.lineHeight=fs[starty]+"px";
  flaky[starty]=f;
  boddie.appendChild(f);
}
  
function start_fall(i, whyp) {
  fs[i]=Math.floor(sizes*(.25+.75*Math.random()));
  dx[i]=Math.random();
  am[i]=8+Math.random()*sizes*.75;
  dy[i]=1+Math.random()*2;
  xp[i]=Math.random()*(swide-fs[i]);
  yp[i]=whyp-fs[i];
  le[i]='falling';
}

function set_width() {
  var sw, sh;
  if (typeof(window.innerWidth)=='number' && window.innerWidth) {
    sw=window.innerWidth;
    sh=window.innerHeight;
  }
  else if (document.compatMode=="CSS1Compat" && document.documentElement && document.documentElement.clientWidth) {
    sw=document.documentElement.clientWidth;
    sh=document.documentElement.clientHeight; 
  }
  else {
    sw=document.body.clientWidth;
	sh=document.body.clientHeight;
  }
  if (sw && sh && has_focus) {
    swide=sw;
    shigh=sh;
  }
  boddie.style.height=shigh+"px";
}

function winter_flakes() {
  var i;
  var c=0;
  for (i=0; i<starty; i++) {
    if (flaky[i] && le[i]!='tidying') {
		if (yp[i]>shigh || xp[i]>swide || xp[i]<-fs[i]) {
		  if (offset>0) offset--;
		  boddie.removeChild(flaky[i]);
		  flaky[i]=false;
		}
		else if (yp[i]+offset/flakes<shigh-0.7*fs[i]) {
		  yp[i]+=dy[i];
		  dx[i]+=0.02+Math.random()/20;
		  xp[i]+=deeex;
		  flaky[i].style.top=yp[i]+"px";
		  flaky[i].style.left=(xp[i]+am[i]*Math.sin(dx[i]))+"px";
		}
		else if (le[i]=='falling') le[i]='landed';
	}
	if (flaky[i] && le[i]=='falling') c++;
  }
  if (c<flakes) freeze_ice(0);
  if (offset>untidy*flakes && !tidying && Math.random()<.05) tidy_flakes();
}

function tidy_flakes() {
  var i;
  tidying=true;
  for (i=swide; i>=-146; i-=2) setTimeout('plough('+i+')', speed*(swide-i));
  setTimeout('tidying=false; offset=0;', speed*(swide-i));
}

function plough(x) {
  var i, p;
  plow.style.left=x+"px";
  for (i=0; i<starty; i++) {
    if (flaky[i] && le[i]!='falling') {
	  p=xp[i]+fs[i]+am[i]*Math.sin(dx[i])-dy[i];
	  if (p<0) {
	    boddie.removeChild(flaky[i]);
		flaky[i]=false;
	  }
	  else if (p>x && p<x+3.5) {
	    le[i]='tidying';
	    xp[i]-=2;
	    if (Math.random()<.1) {
		  yp[i]--;
		  flaky[i].style.top=yp[i]+"px";
	    }
	    flaky[i].style.left=(xp[i]+am[i]*Math.sin(dx[i]))+"px";
	  }
	  else if (p>x+144 && yp[i]<shigh-0.7*fs[i]) {
  	    yp[i]+=dy[i];
		dx[i]+=0.02+Math.random()/10;
		flaky[i].style.top=yp[i]+"px";
		flaky[i].style.left=(xp[i]+am[i]*Math.sin(dx[i]))+"px";
	  }
	}
  }
}

function set_scroll() {
  if (typeof(self.pageXOffset)=='number' && self.pageXoffset) sleft=self.pageXOffset;
  else if (document.body && document.body.scrollLeft) sleft=document.body.scrollLeft;
  else if (document.documentElement && document.documentElement.scrollLeft) sleft=document.documentElement.scrollLeft;
  else sleft=0;
}

function mouse(e) {
  var x;
  if (e) x=e.pageX;
  else {
	x=event.x;
    set_scroll();
    x+=sleft;
  }
  deeex=has_focus?Math.floor(-1+3*(x-sleft)/swide):0;
}
// ]]>

// <![CDATA[
var speed=33; 
var flakes=100; 
var colour="#ffffff"; 
var slush=20; 
var over_or_under="over"; 

/***************************\

\***************************/
var flks=new Array();
var flkx=new Array();
var flky=new Array();
var fldy=new Array();
var slss=new Array();
var slsh=new Array();
var swide, shigh, boddie;

function addLoadEvent(funky) {
  var oldonload=window.onload;
  if (typeof(oldonload)!='function') window.onload=funky;
  else window.onload=function() {
    if (oldonload) oldonload();
    funky();
  }
}

addLoadEvent(baby_its_cold_outside);

function baby_its_cold_outside() { if (document.getElementById) {
  var i;
  boddie=document.createElement("div");
  i=boddie.style;
  i.position="fixed";
  i.top="0px";
  i.left="0px";
  i.overflow="visible";
  i.width="1px";
  i.height="1px";
  i.backgroundColor="transparent";
  document.body.appendChild(boddie);
  set_width();
  for (var i=0; i<flakes; i++) {
    flks[i]=createDiv(3, 3, colour);
    flkx[i]=3*Math.floor(Math.random()*swide/3);
    flky[i]=Math.floor(Math.random()*shigh);
    fldy[i]=2+Math.floor(Math.random()*4);
    flks[i].style.left=flkx[i]+"px";
    flks[i].style.top=flky[i]+"px";
	flks[i].style.zIndex=(over_or_under=="over")?"1001":"0";
    boddie.appendChild(flks[i]);
  }
  setInterval("let_it_snow()", speed);
}}

function createDiv(height, width, colour) {
  var div=document.createElement("div");
  div.style.position="absolute";
  div.style.height=height+"px";
  div.style.width=width+"px";
  div.style.overflow="hidden";
  div.style.backgroundColor=colour;
  return (div);
}

window.onresize=set_width;
function set_width() {
  var sw_min=999999;
  var sh_min=999999;
  if (document.documentElement && document.documentElement.clientWidth) {
    if (document.documentElement.clientWidth>0) sw_min=document.documentElement.clientWidth;
    if (document.documentElement.clientHeight>0) sh_min=document.documentElement.clientHeight;
  }
  if (typeof(self.innerWidth)=='number' && self.innerWidth) {
    if (self.innerWidth>0 && self.innerWidth<sw_min) sw_min=self.innerWidth;
    if (self.innerHeight>0 && self.innerHeight<sh_min) sh_min=self.innerHeight;
  }
  if (document.body.clientWidth) {
    if (document.body.clientWidth>0 && document.body.clientWidth<sw_min) sw_min=document.body.clientWidth;
    if (document.body.clientHeight>0 && document.body.clientHeight<sh_min) sh_min=document.body.clientHeight;
  }
  if (sw_min==999999 || sh_min==999999) {
    sw_min=800;
    sh_min=600;
  }
  swide=sw_min-3;
  shigh=sh_min;
  if (slush) {
    if (swide/3>slss.length) for (i=slss.length; i<swide/3; i++) {
      if (!slsh[i]) slsh[i]=3;
      slss[i]=createDiv(slsh[i], 3, colour);
      boddie.appendChild(slss[i]);
    }
    for (i=0; i<swide/3; i++) {
      slss[i].style.height=slsh[i]+"px";
      slss[i].style.top=shigh-slsh[i]+"px";
      slss[i].style.left=3*i+"px";
    }
    if (i<slss.length && slss[i].style.left!="-3px") for (; i<slss.length; i++) slss[i].style.left="-3px";
  }
}

function let_it_snow(c) {
  var i, x, o=0, z=0;
  for (i=0; i<flakes; i++) {
    flky[i]+=fldy[i];
	x=Math.floor(flkx[i]/3);
    if (slush) {
      o+=slsh[x];
      if (flky[i]>=shigh-slsh[x]) {
        if (x<swide && slsh[x]>slsh[x+1]+3) x++;
        else if (x>0 && slsh[x]>slsh[x-1]+3) x--;
        slss[x].style.top=shigh-(slsh[x]+=3)+"px";
        slss[x].style.height=slsh[x]+"px";
		flky[i]=shigh;
	  }
    }
    if (flky[i]>=shigh || flkx[i]>swide) {
	  flky[i]=0;
	  fldy[i]=2+Math.floor(Math.random()*4);
	  flkx[i]=3*Math.floor(Math.random()*swide/3);
	  flks[i].style.left=flkx[i]+"px";
	  z++;
	}
	flks[i].style.top=flky[i]+"px";
  }
  if (o>flakes*slush) for (i=0; i<slsh.length; i++) if (slsh[i]>3) slsh[i]--;
  if (z || o>flakes*slush) set_width();
}
// ]]>
        </script>
        
    </head>
    <body>
       <div id="perspectiva">
  <div id="contenedor">
    <div class="cara frontal">
			<h1>Caru ti</h1> 
		</div>
		<div class="cara trasera">
			<div id="abrir"></div>
			<div id="partes"></div>
			<div id="carta">
				<i class="icon-cancel">x</i>
				<?xml version="1.0" encoding="utf-8"?>
				<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
				
				<p>Caru ti</p>
                                <div id="poesia">
				<p>
					 Mi amada hada, las pÃ¡ginas de mis sueÃ±os<br>
                                         anhelan la dulzura de tu amor<br>
                                         que descansan en tu hermosura, <br>en 
                                         la calidez de tu voz<br>
                                         que arropa cada latido de 
                                         mi corazÃ³n<br> susurrÃ¡ndole
                                         que enamorado me encuentro,
                                         total, absolutamente de tu 
                                         esencia.<br>
                                         Caru ti â¦â¦<br>
                                         **<br>
                                         .W <br>
                                         &hearts;<br> .B
                                         <br>

                                        Post data: El caballero de la blanca luna.
 </strong>
                                                                                 
<br>
					
				</p>
                                </div>
			</div>
		</div>
	</div><!-- fin contenedor -->
</div>

<script class="cssdeck" src="//cdnjs.cloudflare.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
<link href='http://fonts.googleapis.com/css?family=Bad+Script|Titillium+Web' rel='stylesheet' type='text/css'>
    </body>
</html>
